<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MC×Discord Self-Service Kiosk</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel="stylesheet">

<style>
  body {
    display: flex;
    font-family: Arial, sans-serif; /* default for rest of page */
    margin: 0;
    padding: 0;
  }

  main {
    flex: 1;
    padding: 20px;
    box-sizing: border-box;
  }

  aside {
    width: 300px;
    padding: 20px;
    border-left: 1px solid #ccc;
    box-sizing: border-box;
    background-color: #f9f9f9;
  }

  #marquee-container {
    width: 100%;
    overflow: hidden;
    white-space: nowrap;
    border: 1px solid #ccc;
    padding: 5px;
    box-sizing: border-box;
    margin-bottom: 20px;
  }

  .marquee-text {
    display: inline-block;
    padding-left: 100%; /* Start off-screen to the right */
    will-change: transform;
    font-family: 'Noto Sans JP', sans-serif; /* Font applied here only */
  }

  h1, h2 {
    margin-top: 1em;
  }

  .github-card {
    border: 1px solid #ddd;
    border-radius: 6px;
    padding: 10px;
    background-color: #fff;
    text-align: center;
  }

  .github-card a {
    text-decoration: none;
    color: #0366d6;
    font-weight: bold;
  }

  .github-card img {
    width: 80px;
    border-radius: 8px;
    margin-bottom: 10px;
  }
</style>

</head>
<body>

<main>
<h1>MC×Discord Self-Service Kiosk</h1>
<div id="marquee-container"></div>

<script>
var messages = [
  'Need help? Contact semmelbrot12@breadzonemc.net for 1-on-1 consultation!',
  'Check out all of my plugins! <a href="https://www.spigotmc.org/resources/authors/semmelbrot12.2152387/" target="_blank">Click here</a>',
  'Do you want a simple custom plugin for FREE? Reach out to semmelbrot12@breadzonemc.net!'
];

var current = 0;
var container = document.getElementById('marquee-container');

function createMarquee(msg) {
  container.innerHTML = '';
  var span = document.createElement('span');
  span.className = 'marquee-text';
  span.innerHTML = msg;
  container.appendChild(span);

  const textWidth = span.offsetWidth;
  const containerWidth = container.offsetWidth;
  const speed = 1;
  let start = null;

  function animate(timestamp) {
    if (!start) start = timestamp;
    const elapsed = timestamp - start;
    const distance = elapsed * speed / 16;
    span.style.transform = `translateX(${-distance}px)`;
    if (distance < textWidth + containerWidth * 0.1) {
      requestAnimationFrame(animate);
    } else {
      current = (current + 1) % messages.length;
      createMarquee(messages[current]);
    }
  }

  requestAnimationFrame(animate);
}

createMarquee(messages[current]);
</script>

<h2>Step 1: Paste your server.properties</h2>
<textarea id="serverProps" placeholder="Paste server.properties here" rows="10" cols="80"></textarea>

<h2>Step 2: Paste your MC×Discord YAML config</h2>
<textarea id="mcxConfig" placeholder="Paste MC×Discord config here" rows="10" cols="80"></textarea>

<p>
  <button onclick="runDiagnostics()">Run Diagnostics</button>
</p>

<script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
<script>
function runDiagnostics() {
  const serverText = document.getElementById('serverProps').value;
  const mcxText = document.getElementById('mcxConfig').value;
  if (!serverText || !mcxText) { alert("Please provide both server.properties and MC×Discord config."); return; }

  let serverPort = null;
  serverText.split('\n').forEach(line => {
    line = line.trim();
    if (line.startsWith('#') || line === '') return;
    const [key, value] = line.split('=');
    if (key && key.trim() === 'server-port') serverPort = parseInt(value.trim());
  });

  let mcxConfig = {};
  const errors = [];
  try {
    mcxConfig = jsyaml.load(mcxText);
    if (typeof mcxConfig !== 'object' || mcxConfig === null) throw new Error("YAML invalid");
  } catch (err) { errors.push("Invalid YAML: " + err.message); }

  if (!mcxConfig.webhook) errors.push("Webhook field missing.");
  if (!mcxConfig.port || isNaN(parseInt(mcxConfig.port))) errors.push("Port field missing or invalid.");
  if (!mcxConfig.token) errors.push("Token field missing.");

  if (serverPort && mcxConfig.port && parseInt(mcxConfig.port) === serverPort) {
    errors.push("Port conflict! server-port matches MC×Discord port. See guide.");
  }

  let resultHtml = "<h2>Diagnostics Result</h2>";
  if (errors.length === 0) {
    resultHtml += "<p>All basic checks passed.</p>";
  } else {
    resultHtml += "<p>Issues found:</p><ul>";
    errors.forEach(e => resultHtml += "<li>" + e + "</li>");
    resultHtml += "</ul>";
  }
  resultHtml += '<p><button onclick="window.location.reload();">Run Again</button></p>';

  document.body.innerHTML = resultHtml;
}
</script>
</main>

<aside>
<h2>Need more help?</h2>
<p>Create an issue request!</p>
<div class="github-card">
  <a href="https://github.com/Semmelbrot12/MCxDiscord" target="_blank">
    <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub Logo">
    <div>MC×Discord on GitHub</div>
  </a>
</div>
</aside>

</body>
</html>
